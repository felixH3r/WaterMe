{"version":3,"file":"daypicker.component.js","sources":["../../src/datepicker/daypicker.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { isBs3 } from '../utils/ng2-bootstrap-config';\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\n\n// write an interface for template options\nconst TEMPLATE_OPTIONS: any = {\n  'bs4': {\n    ARROW_LEFT: '&lt;',\n    ARROW_RIGHT: '&gt;'\n  },\n  'bs3': {\n    ARROW_LEFT: `\n    <i class=\"glyphicon glyphicon-chevron-left\"></i>\n    `,\n    ARROW_RIGHT: `\n    <i class=\"glyphicon glyphicon-chevron-right\"></i>\n    `\n  }\n};\n\n\nexport class DayPickerComponent implements OnInit {\n\n  public labels: any[] = [];\n  public title: string;\n  public rows: any[] = [];\n  public weekNumbers: number[] = [];\n  public datePicker: DatePickerInnerComponent;\n  public CURRENT_THEME_TEMPLATE: any;\n\n  public constructor(datePicker: DatePickerInnerComponent) {\n    this.CURRENT_THEME_TEMPLATE = isBs3()\n      ? TEMPLATE_OPTIONS.bs3\n      : TEMPLATE_OPTIONS.bs4;\n    this.datePicker = datePicker;\n  }\n\n  public get isBs4(): boolean {\n    return !isBs3();\n  }\n\n  /*protected getDaysInMonth(year:number, month:number) {\n   return ((month === 1) && (year % 4 === 0) &&\n   ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\n   }*/\n  public ngOnInit(): void {\n    let self = this;\n\n    this.datePicker.stepDay = {months: 1};\n\n    this.datePicker.setRefreshViewHandler(function (): void {\n      let year = this.activeDate.getFullYear();\n      let month = this.activeDate.getMonth();\n      let firstDayOfMonth = new Date(year, month, 1);\n      let difference = this.startingDay - firstDayOfMonth.getDay();\n      let numDisplayedFromPreviousMonth = (difference > 0)\n        ? 7 - difference\n        : -difference;\n      let firstDate = new Date(firstDayOfMonth.getTime());\n\n      if (numDisplayedFromPreviousMonth > 0) {\n        firstDate.setDate(-numDisplayedFromPreviousMonth + 1);\n      }\n\n      // 42 is the number of days on a six-week calendar\n      let _days: Date[] = self.getDates(firstDate, 42);\n      let days: any[] = [];\n      for (let i = 0; i < 42; i++) {\n        let _dateObject = this.createDateObject(_days[i], this.formatDay);\n        _dateObject.secondary = _days[i].getMonth() !== month;\n        _dateObject.uid = this.uniqueId + '-' + i;\n        days[i] = _dateObject;\n      }\n\n      self.labels = [];\n      for (let j = 0; j < 7; j++) {\n        self.labels[j] = {};\n        self.labels[j].abbr = this.dateFilter(days[j].date, this.formatDayHeader);\n        self.labels[j].full = this.dateFilter(days[j].date, 'EEEE');\n      }\n\n      self.title = this.dateFilter(this.activeDate, this.formatDayTitle);\n      self.rows = this.split(days, 7);\n\n      if (this.showWeeks) {\n        self.weekNumbers = [];\n        let thursdayIndex = (4 + 7 - this.startingDay) % 7;\n        let numWeeks = self.rows.length;\n        for (let curWeek = 0; curWeek < numWeeks; curWeek++) {\n          self.weekNumbers.push(self.getISO8601WeekNumber(self.rows[curWeek][thursdayIndex].date));\n        }\n      }\n    }, 'day');\n\n    this.datePicker.setCompareHandler(function (date1: Date, date2: Date): number {\n      let d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());\n      let d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());\n      return d1.getTime() - d2.getTime();\n    }, 'day');\n\n    this.datePicker.refreshView();\n  }\n\n  protected getDates(startDate: Date, n: number): Date[] {\n    let dates: Date[] = new Array(n);\n    let current = new Date(startDate.getTime());\n    let i = 0;\n    let date: Date;\n    while (i < n) {\n      date = new Date(current.getTime());\n      date = this.datePicker.fixTimeZone(date);\n      dates[i++] = date;\n      current = new Date(current.getFullYear(), current.getMonth(), current.getDate() + 1);\n    }\n    return dates;\n  }\n\n  protected getISO8601WeekNumber(date: Date): number {\n    let checkDate = new Date(date.getTime());\n    // Thursday\n    checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\n    let time = checkDate.getTime();\n    // Compare with Jan 1\n    checkDate.setMonth(0);\n    checkDate.setDate(1);\n    return Math.floor(Math.round((time - checkDate.getTime()) / 86400000) / 7) + 1;\n  }\n\n  // todo: key events implementation\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'daypicker',\n  template: `\n<table *ngIf=\"datePicker.datepickerMode==='day'\" role=\"grid\" [attr.aria-labelledby]=\"datePicker.uniqueId+'-title'\" aria-activedescendant=\"activeDateId\">\n  <thead>\n    <tr>\n      <th>\n        <button type=\"button\" \n                class=\"btn btn-default btn-secondary btn-sm pull-left\" \n                (click)=\"datePicker.move(-1)\" \n                tabindex=\"-1\"\n                [innerHTML]=\"CURRENT_THEME_TEMPLATE.ARROW_LEFT\">\n        </button>\n      </th>\n      <th [attr.colspan]=\"5 + (datePicker.showWeeks ? 1 : 0)\">\n        <button [id]=\"datePicker.uniqueId + '-title'\"\n                type=\"button\" class=\"btn btn-default btn-secondary btn-sm\"\n                (click)=\"datePicker.toggleMode()\"\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\n          <strong>{{title}}</strong>\n        </button>\n      </th>\n      <th>\n        <button type=\"button\" \n                class=\"btn btn-default btn-secondary btn-sm pull-right\" \n                (click)=\"datePicker.move(1)\" \n                tabindex=\"-1\"\n                [innerHTML]=\"CURRENT_THEME_TEMPLATE.ARROW_RIGHT\">\n        </button>\n      </th>\n    </tr>\n    <tr>\n      <th *ngIf=\"datePicker.showWeeks\"></th>\n      <th *ngFor=\"let labelz of labels\" class=\"text-center\">\n        <small aria-label=\"labelz.full\"><b>{{labelz.abbr}}</b></small>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <template ngFor [ngForOf]=\"rows\" let-rowz=\"$implicit\" let-index=\"index\">\n      <tr *ngIf=\"!(datePicker.onlyCurrentMonth && rowz[0].secondary && rowz[6].secondary)\">\n        <td *ngIf=\"datePicker.showWeeks\" class=\"h6\" class=\"text-center\">\n          <em>{{ weekNumbers[index] }}</em>\n        </td>\n        <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [id]=\"dtz.uid\">\n          <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-sm {{dtz.customClass}}\"\n                  *ngIf=\"!(datePicker.onlyCurrentMonth && dtz.secondary)\"\n                  [ngClass]=\"{'btn-secondary': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected, disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz), 'btn-default': !isBs4}\"\n                  [disabled]=\"dtz.disabled\"\n                  (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\n            <span [ngClass]=\"{'text-muted': dtz.secondary || dtz.current, 'text-info': !isBs4 && dtz.current}\">{{dtz.label}}</span>\n          </button>\n        </td>\n      </tr>\n    </template>\n  </tbody>\n</table>\n  `\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: DatePickerInnerComponent, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}